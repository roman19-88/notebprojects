# Проект - Bank

## Описание:

Bank - это проект для синхронизирования банковских операций

## Установка:

1. Клонируйте репозиторий:

```
git clone https://github.com/roman19-88/notebprojects
```

2. Установите зависимости:

```
pip install -r requirements.txt
```

## Использование:

from src.processing.py import filter_by_state, sort_by_date

# Пример использования filter_by_state

transactions = [
{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'},
{'id': 59402872, 'state': 'CANCELLED', 'date': '2018-09-17T21:27:25.241241'}
]
executed_transactions = filter_by_state(transactions)

# Пример использования sort_by_date

sorted_transactions = sort_by_date(transactions)

## Вклад

Если вы хотите внести свой вклад, пожалуйста, создайте форк репозитория и отправьте пул-реквест.

# Тесты

## Тесты обхватывают 100% функционала.

**Тесты:**

* Проверяет фильтрацию по существующей валюте (USD, EUR).
* Проверяет фильтрацию по несуществующей валюте.
* Тестирует случай с пустым списком транзакций.
* Проверяет обработку транзакций с отсутствующими ключами (например, отсутствие информации о валюте).
* Использует `@pytest.mark.parametrize` для запуска тестов с различными наборами входных данных.

### `transaction_descriptions(transactions)`

Функция извлекает описания транзакций из списка транзакций.

**Тесты:**

* Проверяет извлечение описаний из списка транзакций.
* Тестирует случай с пустым списком транзакций.
* Проверяет обработку транзакций, у которых отсутствует описание.
* Использует `@pytest.fixture` для предоставления тестовых данных (списка транзакций).

### `card_number_generator(start, stop)`

Функция генерирует отформатированные номера карт в заданном диапазоне.

**Тесты:**

* Проверяет генерацию номеров карт в заданном диапазоне.
* Тестирует генерацию с разными диапазонами чисел.
* Проверяет случай, когда `start` и `stop` равны (один номер в диапазоне).
* Проверяет, что функция правильно обрабатывает начальное значение 0.
* Использует `@pytest.fixture` для предоставления списка сгенерированных номеров карт.

## Функция логирования с декоратором `log`

### Что делает функция?

Функция `log` — это декоратор, который позволяет логировать успешные вызовы функции, а также ошибки, которые могут
возникнуть. Логирование может быть направлено либо в консоль, либо в файл, в зависимости от переданных аргументов.

### Как использовать?

```python
from functools import wraps

def log(filename=None):
    """Декоратор логирования"""

    def inner(func):
        @wraps(func)
        def wrapper(*args, **kwargs):

            try:
                result = func(*args, **kwargs)
            except Exception as e:
                msg = f'{func.__name__} error: {e.__class__.__name__}. Inputs: {args}, {kwargs}'
                raise e
            else:
                msg = f' {func.__name__} ok '
                return result
            finally:
                if filename is None:
                    print(msg)  # Логирование в консоль
                elif filename is not None:
                    with open(filename, 'w') as file:
                        file.write(msg + '\n')  # Логирование в файл

        return wrapper

    return inner